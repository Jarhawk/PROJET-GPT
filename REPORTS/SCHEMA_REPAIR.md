# Schema Repair Report

Date: 2025-08-10T17:09:01.349Z

## Columns added
- public.produits(zone_id)

## Foreign keys ensured
- public.fournisseurs(mama_id) -> public.mamas(id)
- public.roles(mama_id) -> public.mamas(id)
- public.utilisateurs(mama_id) -> public.mamas(id)
- public.utilisateurs(role_id) -> public.roles(id)
- public.commandes(mama_id) -> public.mamas(id)
- public.commandes(fournisseur_id) -> public.fournisseurs(id)
- public.commandes(created_by) -> public.utilisateurs(id)
- public.commandes(validated_by) -> public.utilisateurs(id)
- public.commande_lignes(commande_id) -> public.commandes(id)
- public.commande_lignes(produit_id) -> public.produits(id)
- public.commande_lignes(mama_id) -> public.mamas(id)
- public.templates_commandes(mama_id) -> public.mamas(id)
- public.templates_commandes(fournisseur_id) -> public.fournisseurs(id)
- public.emails_envoyes(commande_id) -> public.commandes(id)
- public.emails_envoyes(mama_id) -> public.mamas(id)
- public.permissions(role_id) -> public.roles(id)
- public.permissions(mama_id) -> public.mamas(id)
- public.consentements_utilisateur(utilisateur_id) -> public.utilisateurs(id)
- public.consentements_utilisateur(mama_id) -> public.mamas(id)
- public.achats(mama_id) -> public.mamas(id)
- public.achats(produit_id) -> public.produits(id)
- public.achats(fournisseur_id) -> public.fournisseurs(id)
- public.alertes(mama_id) -> public.mamas(id)
- public.api_keys(mama_id) -> public.mamas(id)
- public.auth_double_facteur(mama_id) -> public.mamas(id)
- public.bons_livraison(mama_id) -> public.mamas(id)
- public.catalogue_updates(mama_id) -> public.mamas(id)
- public.centres_de_cout(mama_id) -> public.mamas(id)
- public.compta_mapping(mama_id) -> public.mamas(id)
- public.documentation(mama_id) -> public.mamas(id)
- public.documents(mama_id) -> public.mamas(id)
- public.etapes_onboarding(mama_id) -> public.mamas(id)
- public.facture_lignes(mama_id) -> public.mamas(id)
- public.factures(mama_id) -> public.mamas(id)
- public.familles(mama_id) -> public.mamas(id)
- public.feedback(mama_id) -> public.mamas(id)
- public.fiche_cout_history(mama_id) -> public.mamas(id)
- public.fiche_lignes(mama_id) -> public.mamas(id)
- public.fiches(mama_id) -> public.mamas(id)
- public.fiches_techniques(mama_id) -> public.mamas(id)
- public.fournisseur_contacts(mama_id) -> public.mamas(id)
- public.fournisseur_notes(mama_id) -> public.mamas(id)
- public.fournisseur_produits(mama_id) -> public.mamas(id)
- public.fournisseur_produits(produit_id) -> public.produits(id)
- public.fournisseur_produits(fournisseur_id) -> public.fournisseurs(id)
- public.fournisseurs_api_config(mama_id) -> public.mamas(id)
- public.gadgets(mama_id) -> public.mamas(id)
- public.groupes(mama_id) -> public.mamas(id)
- public.guides_seen(mama_id) -> public.mamas(id)
- public.help_articles(mama_id) -> public.mamas(id)
- public.inventaire_zones(mama_id) -> public.mamas(id)
- public.journaux_utilisateur(mama_id) -> public.mamas(id)
- public.lignes_bl(mama_id) -> public.mamas(id)
- public.logs_securite(mama_id) -> public.mamas(id)
- public.menu_fiches(mama_id) -> public.mamas(id)
- public.menus(mama_id) -> public.mamas(id)
- public.menus_jour(mama_id) -> public.mamas(id)
- public.menus_jour_fiches(mama_id) -> public.mamas(id)
- public.notification_preferences(mama_id) -> public.mamas(id)
- public.notifications(mama_id) -> public.mamas(id)
- public.parametres_commandes(mama_id) -> public.mamas(id)
- public.pertes(mama_id) -> public.mamas(id)
- public.planning_lignes(mama_id) -> public.mamas(id)
- public.planning_previsionnel(mama_id) -> public.mamas(id)
- public.promotions(mama_id) -> public.mamas(id)
- public.regles_alertes(mama_id) -> public.mamas(id)
- public.produits(zone_id) -> public.zones_stock(id)
- public.signalements(mama_id) -> public.mamas(id)
- public.sous_familles(mama_id) -> public.mamas(id)
- public.sous_familles(famille_id) -> public.familles(id)
- public.stocks(mama_id) -> public.mamas(id)
- public.tableaux_de_bord(mama_id) -> public.mamas(id)
- public.taches(mama_id) -> public.mamas(id)
- public.tooltips(mama_id) -> public.mamas(id)
- public.transfert_lignes(mama_id) -> public.mamas(id)
- public.transferts(mama_id) -> public.mamas(id)
- public.unites(mama_id) -> public.mamas(id)
- public.produits(mama_id) -> public.mamas(id)
- public.produits(fournisseur_id) -> public.fournisseurs(id)
- public.produits(unite_id) -> public.unites(id)
- public.produits(famille_id) -> public.familles(id)
- public.produits(sous_famille_id) -> public.sous_familles(id)
- public.usage_stats(mama_id) -> public.mamas(id)
- public.utilisateurs_taches(mama_id) -> public.mamas(id)
- public.validation_requests(mama_id) -> public.mamas(id)
- public.ventes_boissons(mama_id) -> public.mamas(id)
- public.ventes_fiches_carte(mama_id) -> public.mamas(id)

## Policies rewritten
- public.settings.settings_all
- public.user_mama_access.user_mama_access_select
- public.user_mama_access.user_mama_access_modify
- public.ventes_fiches.ventes_fiches_all
- public.ventes_import_staging.ventes_import_staging_all
